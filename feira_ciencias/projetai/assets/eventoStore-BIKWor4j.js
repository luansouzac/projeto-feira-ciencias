import{A as n,l as o}from"./index-zSKt_z7e.js";const l=n("evento",{state:()=>({eventos:[],selectedEvento:null,loading:!1,error:null}),getters:{getAllEventos:e=>e.eventos,getActiveEventos:e=>e.eventos.filter(s=>s.ativo),getEventoById:e=>s=>e.eventos.find(t=>t.id_evento===s),getSelectedEvento:e=>e.selectedEvento,isLoadingEventos:e=>e.loading,getEventoErrors:e=>e.error,getTotal:e=>e.length},actions:{async fetchEventos(){this.loading=!0,this.error=null;try{const e=await o.get("/eventos");return this.eventos=e.data,console.log("Eventos carregados:",e.data),!0}catch(e){return this.error=e.response?.data?.message||"Erro ao carregar eventos.",console.error("Erro ao buscar eventos:",e),!1}finally{this.loading=!1}},async createEvento(e){this.loading=!0,this.error=null;try{const s=await o.post("/eventos",{nome:e.nome,ativo:e.ativo==1?"1":"0",data_evento:e.data_evento,inicio_submissao:e.inicio_submissao,fim_submissao:e.fim_submissao,min_pessoas:e.min_pessoas,max_pessoas:e.max_pessoas});return this.eventos.push(s.data),console.log("Evento criado com sucesso:",s.data),!0}catch(s){return this.error=s.response?.data?.message||"Erro ao criar evento.",console.error("Erro ao criar evento:",s),!1}finally{this.loading=!1}},async updateEvento(e,s){this.loading=!0,this.error=null;try{const t=await o.put(`/eventos/${e}`,{nome:s.nome,ativo:s.ativo==1?"1":"0",data_evento:evento.data_evento,inicio_submissao:evento.inicio_submissao,fim_submissao:evento.fim_submissao,min_pessoas:evento.min_pessoas,max_pessoas:evento.max_pessoas}),a=this.eventos.findIndex(r=>r.id_evento===e);return a!==-1&&(this.eventos[a]={...this.eventos[a],...t.data}),!0}catch(t){return this.error=t.response?.data?.message||"Erro ao atualizar evento.",!1}finally{this.loading=!1}},async deleteEvento(e){this.loading=!0,this.error=null;try{return await o.delete(`/eventos/${e}`),this.eventos=this.eventos.filter(s=>s.id_evento!==e),!0}catch(s){return this.error=s.response?.data?.message||"Erro ao deletar evento.",!1}finally{this.loading=!1}},selectEvento(e){this.selectedEvento=this.getEventById(e)},clearSelectedEvent(){this.selectedEvento=null}}});export{l as u};
