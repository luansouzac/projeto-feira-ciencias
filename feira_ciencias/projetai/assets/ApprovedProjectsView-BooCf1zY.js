import{e as m,g as I,l as M,m as U,c as i,w as t,r as n,f as A,o as s,a as o,h as u,p as O,d,b as l,F as h,i as C,t as c,k as T}from"./index-zSKt_z7e.js";import{P as J}from"./ProjectCard-LQA7CFtH.js";const R={key:2},q={class:"text-grey-darken-1"},H={key:3},K=["onClick"],Q={class:"font-weight-bold"},W={class:"text-caption text-grey-darken-1"},X={class:"d-none d-sm-table-cell"},Y={class:"d-none d-md-table-cell"},Z={class:"text-right"},ae={__name:"ApprovedProjectsView",setup(ee){const N=A(),k=m([]),p=m(!0),f=m(null),v=m(""),g=m("grid");let j=null;const D=sessionStorage.getItem("user_data");D&&(j=JSON.parse(D).user.id_usuario),I(async()=>{if(!j){f.value="Usuário não encontrado. Faça o login para ver seus projetos aprovados.",p.value=!1;return}p.value=!0;try{const r=`/projetos?id_responsavel=${j}&id_situacao=2`,{data:e}=await M.get(r);k.value=e}catch(r){console.error("Erro ao buscar projetos aprovados do usuário:",r),f.value="Não foi possível carregar seus projetos aprovados."}finally{p.value=!1}});const V=U(()=>v.value?k.value.filter(r=>r.titulo.toLowerCase().includes(v.value.toLowerCase())):k.value);function B(r){N.push(`/projetos/${r}`)}return(r,e)=>{const b=n("v-btn"),_=n("v-col"),y=n("v-row"),$=n("v-text-field"),x=n("v-icon"),P=n("v-tooltip"),L=n("v-btn-toggle"),w=n("v-card"),z=n("v-skeleton-loader"),F=n("v-alert"),S=n("v-table"),E=n("v-container");return s(),i(E,{fluid:""},{default:t(()=>[o(b,{variant:"text","prepend-icon":"mdi-arrow-left",onClick:e[0]||(e[0]=a=>O(N).go(-1)),class:"mb-6"},{default:t(()=>[...e[3]||(e[3]=[d(" Voltar ",-1)])]),_:1}),o(y,{class:"mb-6"},{default:t(()=>[o(_,null,{default:t(()=>[...e[4]||(e[4]=[l("h1",{class:"text-h4 font-weight-bold text-grey-darken-4"},"Galeria de Projetos Inscritos",-1),l("p",{class:"text-subtitle-1 text-grey-darken-1"}," Explore os projetos você está inscrito. ",-1)])]),_:1})]),_:1}),o(w,{class:"mb-8 pa-4",variant:"outlined"},{default:t(()=>[o(y,{align:"center","no-gutters":""},{default:t(()=>[o(_,{cols:"12",md:"8"},{default:t(()=>[o($,{modelValue:v.value,"onUpdate:modelValue":e[1]||(e[1]=a=>v.value=a),label:"Buscar por título do projeto...","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),o(_,{cols:"12",md:"4",class:"d-flex justify-start justify-md-end mt-4 mt-md-0"},{default:t(()=>[o(L,{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=a=>g.value=a),mandatory:"",density:"compact",variant:"outlined"},{default:t(()=>[o(b,{value:"grid","aria-label":"Visualização em Grade"},{default:t(()=>[o(x,null,{default:t(()=>[...e[5]||(e[5]=[d("mdi-view-grid-outline",-1)])]),_:1}),o(P,{activator:"parent",location:"bottom"},{default:t(()=>[...e[6]||(e[6]=[d("Grade",-1)])]),_:1})]),_:1}),o(b,{value:"list","aria-label":"Visualização em Lista"},{default:t(()=>[o(x,null,{default:t(()=>[...e[7]||(e[7]=[d("mdi-view-list-outline",-1)])]),_:1}),o(P,{activator:"parent",location:"bottom"},{default:t(()=>[...e[8]||(e[8]=[d("Lista",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),p.value?(s(),i(y,{key:0},{default:t(()=>[(s(),u(h,null,C(6,a=>o(_,{key:a,cols:"12",sm:"6",lg:"4"},{default:t(()=>[o(z,{type:"image, article, actions"})]),_:2},1024)),64))]),_:1})):f.value?(s(),i(F,{key:1,type:"error",border:"start",variant:"tonal"},{default:t(()=>[d(c(f.value),1)]),_:1})):V.value.length===0?(s(),u("div",R,[o(w,{flat:"",border:"",class:"text-center pa-8"},{default:t(()=>[o(x,{size:"60",class:"mb-4 text-grey-lighten-1"},{default:t(()=>[...e[9]||(e[9]=[d("mdi-folder-search-outline",-1)])]),_:1}),l("p",q,c(v.value?"Nenhum projeto encontrado para sua busca.":"Nenhum projeto aprovado foi encontrado no momento."),1)]),_:1})])):(s(),u("div",H,[g.value==="grid"?(s(),i(y,{key:0},{default:t(()=>[(s(!0),u(h,null,C(V.value,a=>(s(),i(_,{key:a.id_projeto,cols:"12",sm:"6",lg:"4"},{default:t(()=>[o(J,{projeto:a,onVerDetalhes:G=>B(a.id_projeto)},null,8,["projeto","onVerDetalhes"])]),_:2},1024))),128))]),_:1})):g.value==="list"?(s(),i(w,{key:1,variant:"outlined"},{default:t(()=>[o(S,{hover:""},{default:t(()=>[e[12]||(e[12]=l("thead",null,[l("tr",null,[l("th",{class:"text-left"},"Projeto"),l("th",{class:"text-left d-none d-sm-table-cell"},"Orientador"),l("th",{class:"text-left d-none d-md-table-cell"},"Membros"),l("th",{class:"text-right"},"Ações")])],-1)),l("tbody",null,[(s(!0),u(h,null,C(V.value,a=>(s(),u("tr",{key:`list-${a.id_projeto}`,onClick:G=>B(a.id_projeto),style:{cursor:"pointer"}},[l("td",null,[l("div",Q,c(a.titulo),1),l("div",W,c(a.area_conhecimento||"Área não definida"),1)]),l("td",X,c(a.orientador?.nome||"Não definido"),1),l("td",Y,c(a.membros_count||0),1),l("td",Z,[o(b,{color:"grey-darken-2",variant:"text",size:"small"},{default:t(()=>[e[11]||(e[11]=d(" Ver detalhes ",-1)),o(x,{end:""},{default:t(()=>[...e[10]||(e[10]=[d("mdi-arrow-right",-1)])]),_:1})]),_:1})])],8,K))),128))])]),_:1})]),_:1})):T("",!0)]))]),_:1})}}};export{ae as default};
