import{_ as P,e as g,x as w,r as t,c as m,o as d,w as s,a as o,b as Z,t as G,j as H,h as I,F as J,i as K,k as p,y as Q,d as S,z as W}from"./index-zSKt_z7e.js";const X={class:"text-h6 font-weight-bold",style:{color:"var(--v-theme-green-darken-4)"}},Y={__name:"CrudModal",props:{modelValue:{type:Boolean,required:!0},title:{type:String,default:"FormulÃ¡rio"},item:{type:Object,default:null},fields:{type:Array,required:!0},loading:{type:Boolean,default:!1}},emits:["update:modelValue","save"],setup(v,{emit:C}){const _=v,f=C,y=g(null),r=g({}),k=g({});w(()=>_.item,l=>{const a={};_.fields.forEach(n=>{let u=null;l&&l[n.key]!==void 0?u=l[n.key]:u=n.defaultValue,n.type==="date"&&u?a[n.key]=new Date(u):a[n.key]=u}),r.value=a},{immediate:!0,deep:!0}),w(()=>_.modelValue,async l=>{l&&(await W(),y.value?.$el.querySelector("input")?.focus())});const D=l=>l?new Date(l).toLocaleDateString("pt-BR",{timeZone:"UTC"}):"",i=l=>!l.rules||!Array.isArray(l.rules)?[]:l.rules.map(a=>typeof a=="function"?n=>a(n,r.value):a),b=()=>{f("update:modelValue",!1)},x=async()=>{if(!y.value)return;const{valid:l}=await y.value.validate();if(!l)return;const a={...r.value};_.fields.forEach(n=>{if(n.type==="date"&&a[n.key]){const u=new Date(a[n.key]);u.setMinutes(u.getMinutes()+u.getTimezoneOffset()),a[n.key]=u.toISOString().split("T")[0]}}),f("save",a)};return(l,a)=>{const n=t("v-icon"),u=t("v-spacer"),V=t("v-btn"),B=t("v-card-title"),h=t("v-divider"),U=t("v-text-field"),M=t("v-textarea"),T=t("v-select"),F=t("v-date-picker"),N=t("v-menu"),R=t("v-checkbox"),q=t("v-col"),A=t("v-row"),E=t("v-container"),O=t("v-form"),j=t("v-card-text"),z=t("v-card-actions"),L=t("v-card"),$=t("v-dialog");return d(),m($,{"model-value":v.modelValue,"onUpdate:modelValue":b,"max-width":"800px",scrollable:""},{default:s(()=>[o(L,{rounded:"lg",elevation:"8"},{default:s(()=>[o(B,{class:"d-flex align-center pa-4"},{default:s(()=>[o(n,{start:"",color:"green-darken-4",icon:"mdi-form-select"}),Z("span",X,G(v.title),1),o(u),o(V,{icon:"mdi-close",variant:"text",onClick:b,"aria-label":"Fechar modal"})]),_:1}),o(h),o(j,{class:"pa-4"},{default:s(()=>[o(O,{ref_key:"formRef",ref:y,onSubmit:H(x,["prevent"])},{default:s(()=>[o(E,null,{default:s(()=>[o(A,null,{default:s(()=>[(d(!0),I(J,null,K(v.fields,e=>(d(),m(q,{key:e.key,cols:e.cols||12,md:e.md||e.cols||12,class:"py-1"},{default:s(()=>[["text","number","datetime-local"].includes(e.type)?(d(),m(U,{key:0,modelValue:r.value[e.key],"onUpdate:modelValue":c=>r.value[e.key]=c,label:e.label,type:e.type==="number"?"number":e.type,rules:i(e),variant:"outlined",color:"green-darken-4",density:"comfortable"},null,8,["modelValue","onUpdate:modelValue","label","type","rules"])):p("",!0),e.type==="textarea"?(d(),m(M,{key:1,modelValue:r.value[e.key],"onUpdate:modelValue":c=>r.value[e.key]=c,label:e.label,rules:i(e),variant:"outlined",color:"green-darken-4",density:"comfortable","auto-grow":"",rows:"3"},null,8,["modelValue","onUpdate:modelValue","label","rules"])):p("",!0),e.type==="select"?(d(),m(T,{key:2,modelValue:r.value[e.key],"onUpdate:modelValue":c=>r.value[e.key]=c,items:e.items,label:e.label,rules:i(e),"item-title":"title","item-value":"value",variant:"outlined",color:"green-darken-4",density:"comfortable"},null,8,["modelValue","onUpdate:modelValue","items","label","rules"])):p("",!0),e.type==="date"?(d(),m(N,{key:3,modelValue:k.value[e.key],"onUpdate:modelValue":c=>k.value[e.key]=c,"close-on-content-click":!1,location:"bottom"},{activator:s(({props:c})=>[o(U,Q({"model-value":D(r.value[e.key]),label:e.label,rules:i(e),readonly:""},{ref_for:!0},c,{variant:"outlined",color:"green-darken-4",density:"comfortable","append-inner-icon":"mdi-calendar"}),null,16,["model-value","label","rules"])]),default:s(()=>[o(F,{modelValue:r.value[e.key],"onUpdate:modelValue":[c=>r.value[e.key]=c,c=>k.value[e.key]=!1],title:"",header:"Selecione a data",color:"green-darken-4"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])):p("",!0),e.type==="checkbox"?(d(),m(R,{key:4,modelValue:r.value[e.key],"onUpdate:modelValue":c=>r.value[e.key]=c,label:e.label,rules:i(e),color:"green-darken-4","true-value":1,"false-value":0},null,8,["modelValue","onUpdate:modelValue","label","rules"])):p("",!0)]),_:2},1032,["cols","md"]))),128))]),_:1})]),_:1})]),_:1},512)]),_:1}),o(h),o(z,{class:"pa-4"},{default:s(()=>[o(u),o(V,{variant:"text",onClick:b,disabled:v.loading},{default:s(()=>[...a[0]||(a[0]=[S(" Cancelar ",-1)])]),_:1},8,["disabled"]),o(V,{color:"green-darken-4",variant:"flat",loading:v.loading,onClick:x,"prepend-icon":"mdi-check-circle"},{default:s(()=>[...a[1]||(a[1]=[S(" Salvar ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},te=P(Y,[["__scopeId","data-v-c0d37f90"]]);export{te as C};
